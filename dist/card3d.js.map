{"version":3,"file":"card3d.js","sources":["../src/card3d.js"],"sourcesContent":["\"use strict\";\n\nconst Card3dElements = [];\n\nclass Card3d {\n  constructor(element, conf) {\n    this.verify(element);\n\n    this.$e = element;\n\n    Card3dElements.push(element);\n    this.setConfiguration(conf);\n    this.start(false);\n  }\n\n  verify(element) {\n    if (!element)\n      throw \"[CARD3D] You should give a dom element to the constructor !\";\n    if (element.length != undefined)\n      throw \"[CARD3D] 'element' should be one element !\";\n  }\n\n  setConfiguration(conf = {}) {\n    this.$e.setAttribute(\"data-card3d\", \"\");\n\n    const keys = Object.keys(conf);\n    for (const key of keys) {\n      this.$e.setAttribute(\n        `data-card3d-${key.toLowerCase()}`,\n        conf[key].toString()\n      );\n    }\n  }\n\n  start(resetStop = true) {\n    const e = this.$e;\n\n    if (resetStop) e.removeAttribute(\"data-card3d-stop\");\n\n    let focus = e;\n    const config = e.dataset;\n\n    const fullPage =\n      config.card3dFullPageListening &&\n      JSON.parse(config.card3dFullPageListening);\n    if (fullPage) focus = document.body;\n\n    const perspective =\n      config.card3dPerspective && parseFloat(config.card3dPerspective)\n        ? parseFloat(config.card3dPerspective)\n        : 500;\n\n    const startPositionX =\n      config.card3dStartX && parseFloat(config.card3dStartX)\n        ? parseFloat(config.card3dStartX)\n        : 0;\n    const startPositionY =\n      config.card3dStartY && parseFloat(config.card3dStartY)\n        ? parseFloat(config.card3dStartY)\n        : 0;\n\n    //glare element\n    const glare = config.card3dGlare != null && config.card3dGlare != undefined;\n    const glareOpacity =\n      glare && parseFloat(config.card3dGlare)\n        ? parseFloat(config.card3dGlare)\n        : 0.5;\n    const gl = document.createElement(\"span\");\n    gl.style = `\n        will-change: transform;\n        position: absolute;\n        background-image: linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%);\n        pointer-event: none; \n        transform-origin: 0% 0%;\n        transform: translate(-50%, -50%) rotate(180deg);\n        opacity: 0;\n        z-index: 999;\n        `;\n    e.appendChild(gl);\n\n    this.$gl = gl;\n    this.$focus = focus;\n    this.$eventMoove = (event) =>\n      this.mousemove(\n        event,\n        focus,\n        config,\n        e,\n        gl,\n        perspective,\n        glare,\n        glareOpacity\n      );\n    this.$eventOut = (event) => this.mouseout(event, e, gl);\n\n    //event setup\n    focus.addEventListener(\"mousemove\", this.$eventMoove);\n    const reset = config.card3dReset && JSON.parse(config.card3dReset);\n    if (\n      reset ||\n      config.card3dReset == null ||\n      config.card3dReset == undefined\n    ) {\n      focus.addEventListener(\"mouseout\", this.$eventOut);\n    }\n\n    e.style.overflow = \"hidden\";\n    e.style.willChange = \"transform\";\n    e.style.transform = `\n        perspective(500px) \n        rotateX(${startPositionY}deg) \n        rotateY(${startPositionX}deg)\n        `;\n  }\n\n  mousemove(event, focus, config, e, gl, perspective, glare, glareOpacity) {\n    //config\n    const stopC = config.card3dStop && JSON.parse(config.card3dStop);\n\n    if (stopC || !e.isConnected || !focus.isConnected) {\n      this.stop();\n      return;\n    }\n\n    const reverse =\n      config.card3dReverse && JSON.parse(config.card3dReverse) ? 1 : -1;\n    const axis = config.card3dAxis ? config.card3dAxis : \"all\";\n    const scale =\n      config.card3dScale && parseFloat(config.card3dScale)\n        ? parseFloat(config.card3dScale)\n        : 1;\n    const delta =\n      config.card3dDelta && parseFloat(config.card3dDelta)\n        ? parseFloat(config.card3dDelta)\n        : 10;\n    //end\n\n    e.style.transition = \"\";\n\n    const rect = e.getBoundingClientRect();\n\n    const middleWidth = rect.width / 2;\n    const middleHeight = rect.height / 2;\n    const middleX = rect.left + middleWidth;\n    const middleY = rect.top + middleHeight;\n\n    const x = (middleX - event.clientX) * -1;\n    const y = middleY - event.clientY;\n\n    let finalX =\n      (x / (focus != e ? window.innerWidth / 2 : rect.width / 2)) * delta;\n    let finalY =\n      (y / (focus != e ? window.innerHeight / 2 : rect.height / 2)) * delta;\n\n    if (axis.toLowerCase() == \"x\") {\n      finalY = 0;\n    } else if (axis.toLowerCase() == \"y\") {\n      finalX = 0;\n    }\n\n    //glare\n    if (glare) {\n      const angle =\n        Math.atan2(event.clientX - middleX, -(event.clientY - middleY)) *\n        (180 / Math.PI);\n      const glareSize =\n        (rect.width > rect.height ? rect.width : rect.height) * 2;\n      gl.style.opacity = glareOpacity;\n      gl.style.left = \"50%\";\n      gl.style.top = \"50%\";\n      gl.style.width = glareSize + \"px\";\n      gl.style.height = glareSize + \"px\";\n      gl.style.transform = `rotate(${angle}deg) translate(-50%, -50%)`;\n      gl.style.display = \"block\";\n    }\n\n    e.style.transform = `\n        perspective(${perspective}px) \n        rotateX(${finalY * reverse}deg) \n        rotateY(${finalX * reverse}deg)\n        scale(${scale})\n        `;\n  }\n\n  mouseout(event, e, gl) {\n    e.style.transition = \"0.5s ease\";\n    e.style.transform = \"\";\n    gl.style.opacity = \"0\";\n  }\n\n  stop() {\n    this.$e.setAttribute(\"data-card3d-stop\", \"true\");\n    this.$focus.removeEventListener(\"mousemove\", this.$eventMoove);\n    this.$focus.removeEventListener(\"mouseout\", this.$eventMoove);\n    this.$gl.remove();\n    Card3dElements.splice(Card3dElements.indexOf(this.$e), 1);\n  }\n}\n\n//HANDLER ATTRIBUTE\nfunction Card3dAttributesHandler() {\n  let elements = document.querySelectorAll(\"[data-card3d]\");\n\n  elements.forEach(function (el) {\n    if (Card3dElements.indexOf(el) != -1 || !el.getAttribute) {\n      return;\n    }\n\n    try {\n      const stopC = el.dataset.card3dStop && JSON.parse(el.dataset.card3dStop);\n      if (stopC) return;\n      new Card3d(el);\n    } catch (e) {}\n  });\n}\n\n//OBSERVER\nfunction Card3dObserver() {\n  function getMutationObserver() {\n    return (\n      window.MutationObserver ||\n      window.WebKitMutationObserver ||\n      window.MozMutationObserver\n    );\n  }\n\n  const MutationObserver = getMutationObserver();\n\n  const observerDOM = new MutationObserver(function (mutations) {\n    if (!mutations) return;\n    Card3dAttributesHandler();\n  });\n\n  observerDOM.observe(window.document.documentElement, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    removedNodes: true,\n  });\n}\n\n//DOM LOADED\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  Card3dObserver();\n  Card3dAttributesHandler();\n});\n\nexport default Card3d;\n"],"names":["Card3dElements","Card3d","constructor","element","conf","verify","$e","push","setConfiguration","start","length","undefined","setAttribute","keys","Object","key","toLowerCase","toString","resetStop","e","removeAttribute","focus","config","dataset","fullPage","card3dFullPageListening","JSON","parse","document","body","perspective","card3dPerspective","parseFloat","startPositionX","card3dStartX","startPositionY","card3dStartY","glare","card3dGlare","glareOpacity","gl","createElement","style","appendChild","$gl","$focus","$eventMoove","event","mousemove","$eventOut","mouseout","addEventListener","reset","card3dReset","overflow","willChange","transform","stopC","card3dStop","isConnected","stop","reverse","card3dReverse","axis","card3dAxis","scale","card3dScale","delta","card3dDelta","transition","rect","getBoundingClientRect","middleWidth","width","middleHeight","height","middleX","left","middleY","top","x","clientX","y","clientY","finalX","window","innerWidth","finalY","innerHeight","angle","Math","atan2","PI","glareSize","opacity","display","removeEventListener","remove","splice","indexOf","Card3dAttributesHandler","elements","querySelectorAll","forEach","el","getAttribute","Card3dObserver","getMutationObserver","MutationObserver","WebKitMutationObserver","MozMutationObserver","observerDOM","mutations","observe","documentElement","childList","subtree","attributes","removedNodes"],"mappings":"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"}